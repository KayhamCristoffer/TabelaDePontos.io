<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Sistema de gestÃ£o de pontos interativo e responsivo">
  <title>ğŸ† Tabela de Pontos â€” Sistema Interativo</title>
  
  <!-- Estilos -->
  <link rel="stylesheet" href="styles.css">
  
  <!-- Chart.js + Plugin de Annotation -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@3.0.1"></script>
  
  <!-- Preload para performance -->
  <link rel="preconnect" href="https://cdn.jsdelivr.net">
</head>
<body>

  <!-- Container Principal -->
  <div id="mainApp" class="container">
    
    <!-- Header com aÃ§Ãµes -->
    <header class="app-header">
      <div class="header-content">
        <h1>ğŸ† Tabela de Pontos Interativa</h1>
        <div class="header-actions">
          <button 
            class="btn btn-ghost btn-icon" 
            id="toggleCustomBtn" 
            title="Mostrar/Ocultar PersonalizaÃ§Ã£o"
            aria-label="Alternar painel de personalizaÃ§Ã£o"
            style="display: none;">
            ğŸ¨ Personalizar
          </button>
          <button 
            class="btn btn-ghost btn-icon" 
            id="downloadBtn" 
            title="Baixar dados atualizados"
            aria-label="Baixar arquivo de dados atualizado"
            style="display: none;">
            ğŸ“¥ Download
          </button>
          <button 
            class="btn btn-primary btn-icon" 
            id="loginBtn" 
            title="Fazer login para editar"
            aria-label="Fazer login">
            ğŸ” Entrar
          </button>
          <button 
            class="btn btn-ghost btn-icon" 
            id="logoutBtn" 
            title="Sair do sistema"
            aria-label="Fazer logout"
            style="display: none;">
            ğŸšª Sair
          </button>
        </div>
      </div>
    </header>

    <!-- Grid de Cards -->
    <div class="grid">
      
      <!-- Card de PersonalizaÃ§Ã£o (Opcional/Oculto) -->
      <div class="card animate-fade-in" id="customizationCard" style="display: none;">
        <h3>ğŸ¨ PersonalizaÃ§Ã£o</h3>
        <p class="muted">Escolha o tema visual do sistema</p>
        
        <div class="palette" id="palette" role="radiogroup" aria-label="SeleÃ§Ã£o de tema"></div>
        
        <div class="controls-row">
          <button 
            class="btn btn-secondary" 
            id="toggleThemeBtn"
            aria-label="Alternar entre modo claro e escuro">
            ğŸŒ“ Alternar Tema
          </button>
          <button 
            class="btn btn-ghost" 
            id="resetThemeBtn"
            aria-label="Resetar tema para o padrÃ£o">
            â†º Resetar
          </button>
        </div>
      </div>

      <!-- Card de GrÃ¡fico -->
      <div class="card animate-fade-in full-width" style="animation-delay: 0.1s;">
        <h3>ğŸ“Š VisualizaÃ§Ã£o</h3>
        <div class="chart-container" role="img" aria-label="GrÃ¡fico de pontuaÃ§Ã£o dos usuÃ¡rios">
          <canvas id="pointsChart"></canvas>
        </div>
        <div class="chart-legend">
          <span class="legend-item">
            <span class="legend-line legend-avg"></span>
            <span class="muted small">MÃ©dia</span>
          </span>
          <span class="legend-item">
            <span class="legend-line legend-med"></span>
            <span class="muted small">Mediana</span>
          </span>
        </div>
      </div>

      <!-- Card de Tabela -->
      <div class="card full-width animate-fade-in" style="animation-delay: 0.2s;">
        <div class="table-header-section">
          <h3>ğŸ“‹ Gerenciamento de Pontos</h3>
          
          <!-- Abas de Filtro -->
          <div class="tabs" id="categoryTabs" role="tablist">
            <button class="tab active" data-category="Geral" role="tab" aria-selected="true">ğŸ“Š Geral</button>
            <button class="tab" data-category="Atividade" role="tab" aria-selected="false">ğŸ’ª Atividade</button>
            <button class="tab" data-category="Experiencia" role="tab" aria-selected="false">â­ ExperiÃªncia</button>
            <button class="tab" data-category="Bonus" role="tab" aria-selected="false">ğŸ BÃ´nus</button>
            <button class="tab" data-category="Maturidade" role="tab" aria-selected="false">ğŸŒ± Maturidade</button>
            <button class="tab" data-category="Evento" role="tab" aria-selected="false">ğŸ‰ Evento</button>
          </div>
        </div>
        
        <div class="table-wrapper">
          <table id="pontosTable" role="table" aria-label="Tabela de pontuaÃ§Ã£o">
            <thead>
              <tr id="tableHeader" role="row"></tr>
            </thead>
            <tbody id="tableBody"></tbody>
          </table>
        </div>

        <!-- Controles (somente quando logado) -->
        <div class="table-controls" id="tableControls" style="display: none;">
          <div class="control-group">
            <div class="input-group">
              <label for="newUserName" class="sr-only">Nome do novo usuÃ¡rio</label>
              <input 
                type="text" 
                id="newUserName" 
                placeholder="Nome do novo usuÃ¡rio"
                aria-label="Digite o nome do usuÃ¡rio a ser adicionado"
                maxlength="30">
              <button 
                class="btn btn-success" 
                id="addUserBtn"
                aria-label="Adicionar novo usuÃ¡rio">
                â• Adicionar UsuÃ¡rio
              </button>
            </div>
            
            <div class="input-group">
              <label for="newCategoryName" class="sr-only">Nome da nova categoria</label>
              <input 
                type="text" 
                id="newCategoryName" 
                placeholder="Nome da nova categoria"
                aria-label="Digite o nome da categoria a ser adicionada"
                maxlength="30">
              <button 
                class="btn btn-success" 
                id="addCategoryBtn"
                aria-label="Adicionar nova categoria">
                â• Adicionar Categoria
              </button>
            </div>
          </div>
          
          <div class="action-buttons">
            <button 
              class="btn btn-primary" 
              id="saveDataBtn"
              aria-label="Salvar alteraÃ§Ãµes no arquivo">
              ğŸ’¾ Salvar AlteraÃ§Ãµes
            </button>
            <button 
              class="btn btn-ghost" 
              id="resetDataBtn"
              aria-label="Resetar dados para o estado inicial">
              â™»ï¸ Resetar Dados
            </button>
          </div>
        </div>
      </div>

    </div>
  </div>

  <!-- Modal de Login -->
  <div id="loginModal" class="modal" role="dialog" aria-labelledby="loginTitle" aria-modal="true" style="display: none;">
    <div class="modal-content animate-scale">
      <div class="login-header">
        <h2 id="loginTitle">ğŸ” Acesso ao Sistema</h2>
        <p class="muted">Entre com suas credenciais para editar</p>
      </div>
      
      <form id="loginForm" class="login-form" novalidate>
        <div class="form-group">
          <label for="loginUser">
            <span>ğŸ‘¤ UsuÃ¡rio</span>
          </label>
          <input 
            type="text" 
            id="loginUser" 
            name="username"
            placeholder="Digite seu usuÃ¡rio" 
            autocomplete="username"
            required
            aria-required="true"
            aria-describedby="userHelp">
          <small id="userHelp" class="muted">Nome de usuÃ¡rio do sistema</small>
        </div>
        
        <div class="form-group">
          <label for="loginPass">
            <span>ğŸ”‘ Senha</span>
          </label>
          <input 
            type="password" 
            id="loginPass" 
            name="password"
            placeholder="Digite sua senha" 
            autocomplete="current-password"
            required
            aria-required="true"
            aria-describedby="passHelp">
          <small id="passHelp" class="muted">Senha de acesso</small>
        </div>
        
        <div class="form-buttons">
          <button type="submit" class="btn btn-primary btn-block" aria-label="Entrar no sistema">
            Entrar
          </button>
          <button type="button" class="btn btn-ghost btn-block" id="cancelLoginBtn" aria-label="Cancelar login">
            Cancelar
          </button>
        </div>
        
        <div id="loginError" class="error-message" role="alert" aria-live="polite"></div>
      </form>
    </div>
  </div>

  <!-- Toast Container para notificaÃ§Ãµes -->
  <div id="toastContainer" class="toast-container" aria-live="polite" aria-atomic="true"></div>

  <!-- Script Principal -->
  <script src="script.js"></script>
</body>
</html>
